import{Da as y,Ea as v,Fa as w,Hb as L,Na as b,Oa as k,P as O,Pa as T,X as d,Ya as I,ca as m,ha as M,j as _,ka as P,kb as E,la as f,mb as z,p as x,t as C,tb as a,ua as p,va as i,w as c,wa as u,xb as S,yb as j,z as g}from"./chunk-4BY5CDBJ.js";var s=class extends Error{};s.prototype.name="InvalidTokenError";function $(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,n)=>{let r=n.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function F(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return $(t)}catch{return atob(t)}}function D(e,t){if(typeof e!="string")throw new s("Invalid token specified: must be a string");t||(t={});let n=t.header===!0?0:1,r=e.split(".")[n];if(typeof r!="string")throw new s(`Invalid token specified: missing part #${n+1}`);let l;try{l=F(r)}catch(o){throw new s(`Invalid token specified: invalid base64 for part #${n+1} (${o.message})`)}try{return JSON.parse(l)}catch(o){throw new s(`Invalid token specified: invalid json for part #${n+1} (${o.message})`)}}var U=class e{constructor(t,n,r){this.http=t;this.router=n;this.platformId=r}BASE_URL="https://bistropulse-backend.onrender.com/api/auth";TOKEN_KEY="auth_token";USER_KEY="user_data";getCommonHeaders(){return new S({"Content-Type":"application/json",Accept:"application/json"})}signup(t){return this.http.post(`${this.BASE_URL}/register/`,t,{headers:this.getCommonHeaders()}).pipe(C(n=>{n.token&&this.saveToken(n.token),n.user&&this.saveUserData(n.user)}),x(this.handleError))}login(t){return this.http.post(`${this.BASE_URL}/login/`,t,{headers:this.getCommonHeaders()}).pipe(C(n=>{n.token&&this.saveToken(n.token),n.user&&this.saveUserData(n.user)}),x(this.handleError))}saveToken(t){a(this.platformId)&&localStorage.setItem(this.TOKEN_KEY,t)}saveUserData(t){a(this.platformId)&&localStorage.setItem(this.USER_KEY,JSON.stringify(t))}getToken(){return a(this.platformId)?localStorage.getItem(this.TOKEN_KEY):null}getUserData(){if(a(this.platformId)){let t=localStorage.getItem(this.USER_KEY);return t?JSON.parse(t):null}return null}logout(){a(this.platformId)&&(localStorage.removeItem(this.TOKEN_KEY),localStorage.removeItem(this.USER_KEY),this.router.navigate(["/auth/login"]))}isLoggedIn(){return a(this.platformId)&&!!this.getToken()}getUserRole(){return this.getUserData()?.role||"admin"}decodeToken(){let t=this.getToken();if(!t)return null;try{return D(t)}catch(n){return console.error("Failed to decode token:",n),null}}getCurrentUserId(){return this.getUserData()?.id||null}handleError(t){console.error("AuthService error:",t);let n="An unknown error occurred";return t.status===401?(n="Invalid credentials",this.logout()):t.error?.message?n=t.error.message:t.message&&(n=t.message),_(()=>new Error(n))}static \u0275fac=function(n){return new(n||e)(g(j),g(L),g(O))};static \u0275prov=c({token:e,factory:e.\u0275fac,providedIn:"root"})};var R=class e{getIcon(t){let n={success:'<i class="fa-solid fa-check-circle text-success"></i>',info:'<i class="fa-solid fa-circle-info text-primary"></i>',warning:'<i class="fa-solid fa-triangle-exclamation text-warning"></i>',danger:'<i class="fa-solid fa-circle-xmark text-danger"></i>',primary:'<i class="fa-solid fa-bell text-primary"></i>'};return n[t]||n.primary}getProgressBarColor(t){let n={success:"#28a745",danger:"#dc3545",warning:"#ffc107",primary:"#0d6efd",info:"#0d6efd"};return n[t]||n.primary}showToast(t,n="primary",r=3e3){let l=document.getElementById("toast-container");if(!l)return null;let o=document.createElement("div");o.className=`custom-toast border-${n}`,o.setAttribute("role","alert"),o.setAttribute("aria-live","assertive"),o.setAttribute("aria-atomic","true");let H=this.getProgressBarColor(n);o.innerHTML=`
      <div class="toast-body d-flex align-items-start gap-2">
        <div class="toast-icon">${this.getIcon(n)}</div>
        <div class="flex-grow-1">
          <strong class="text-capitalize">${n}</strong>
          <div>${t}</div>
        </div>
        <button type="button" class="btn-close ms-2" aria-label="Close"></button>
      </div>
      <div class="toast-progress" style="color: ${H}; animation-duration: ${r}ms;"></div>
    `,l.appendChild(o),o.querySelector(".btn-close")?.addEventListener("click",()=>{this.hideToast(o)}),o.offsetHeight,setTimeout(()=>{o.classList.add("show")},10);let A=setTimeout(()=>{o.parentNode&&o.classList.contains("show")&&this.hideToast(o)},r);return o.hideTimeout=A,o.addEventListener("transitionend",K=>{K.propertyName==="transform"&&o.classList.contains("hide")&&(o.hideTimeout&&clearTimeout(o.hideTimeout),o.remove())}),o}hideToast(t){t.classList.remove("show"),t.classList.add("hide"),setTimeout(()=>{t.parentNode&&t.remove()},300)}showSuccess(t,n){return this.showToast(t,"success",n)}showError(t,n){return this.showToast(t,"danger",n)}showWarning(t,n){return this.showToast(t,"warning",n)}showInfo(t,n){return this.showToast(t,"info",n)}clearAll(){let t=document.getElementById("toast-container");t&&t.querySelectorAll(".toast").forEach(r=>{this.hideToast(r)})}static \u0275fac=function(n){return new(n||e)};static \u0275prov=c({token:e,factory:e.\u0275fac,providedIn:"root"})};var N=class e{timeoutRef;constructor(){}start(t,n=15e3){this.clear(),this.timeoutRef=setTimeout(t,n)}clear(){this.timeoutRef&&(clearTimeout(this.timeoutRef),this.timeoutRef=null)}static \u0275fac=function(n){return new(n||e)};static \u0275prov=c({token:e,factory:e.\u0275fac,providedIn:"root"})};function G(e,t){if(e&1&&(p(0,"div",15),b(1),i()),e&2){let n=y();d(),k(n.loadingText)}}var Y=class e{loadingText;static \u0275fac=function(n){return new(n||e)};static \u0275cmp=m({type:e,selectors:[["app-loading-spinner"]],inputs:{loadingText:"loadingText"},standalone:!1,decls:15,vars:1,consts:[[1,"spinner-overlay"],[1,"loading-container"],[1,"spinner-wrapper"],[1,"orbit-ring","orbit-ring-1"],[1,"orbit-ring","orbit-ring-2"],[1,"orbit-ring","orbit-ring-3"],[1,"img-con"],["src","assets/images/pending-restaurants.png","alt","Loading...",1,"logo-spinner"],[1,"particle","particle-1"],[1,"particle","particle-2"],[1,"particle","particle-3"],[1,"particle","particle-4"],[1,"particle","particle-5"],[1,"particle","particle-6"],["class","loading-text",4,"ngIf"],[1,"loading-text"]],template:function(n,r){n&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),u(3,"div",3)(4,"div",4)(5,"div",5),p(6,"div",6),u(7,"img",7),i(),u(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11)(12,"div",12)(13,"div",13),i(),M(14,G,2,1,"div",14),i()()),n&2&&(d(14),f("ngIf",r.loadingText))},dependencies:[z],styles:['.loading-container[_ngcontent-%COMP%]{height:70vh!important;display:flex;align-items:center;justify-content:center;position:relative;background:radial-gradient(circle at center,rgba(3,171,255,.1) 0%,transparent 70%);flex-direction:column}.spinner-wrapper[_ngcontent-%COMP%]{position:relative;width:120px;height:120px}.img-con[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);overflow:hidden;width:70px;height:70px;border-radius:50%;z-index:10;animation:_ngcontent-%COMP%_logoFloat 3s ease-in-out infinite;box-shadow:0 0 30px #03abff80}.img-con[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:linear-gradient(45deg,#03abff4d,#00d4ff4d);border-radius:50%;z-index:1;animation:_ngcontent-%COMP%_logoGlow 2s ease-in-out infinite alternate}.logo-spinner[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;z-index:2;filter:brightness(0) saturate(100%) invert(47%) sepia(96%) saturate(1352%) hue-rotate(184deg) brightness(101%) contrast(101%)}.orbit-ring[_ngcontent-%COMP%]{position:absolute;border:2px solid transparent;border-radius:50%;animation:_ngcontent-%COMP%_rotate 3s linear infinite}.orbit-ring-1[_ngcontent-%COMP%]{width:90px;height:90px;top:15px;left:15px;border-top:2px solid #03abff;border-right:2px solid transparent;animation-duration:2s}.orbit-ring-2[_ngcontent-%COMP%]{width:110px;height:110px;top:5px;left:5px;border-left:2px solid #00d4ff;border-bottom:2px solid transparent;animation-duration:3s;animation-direction:reverse}.orbit-ring-3[_ngcontent-%COMP%]{width:130px;height:130px;top:-5px;left:-5px;border-right:2px solid rgba(3,171,255,.5);border-top:2px solid transparent;animation-duration:4s}.particle[_ngcontent-%COMP%]{position:absolute;width:4px;height:4px;background:#03abff;border-radius:50%;opacity:0;animation:_ngcontent-%COMP%_particleFloat 2s ease-in-out infinite}.particle-1[_ngcontent-%COMP%]{top:20%;left:20%;animation-delay:0s}.particle-2[_ngcontent-%COMP%]{top:20%;right:20%;animation-delay:.3s}.particle-3[_ngcontent-%COMP%]{bottom:20%;left:20%;animation-delay:.6s}.particle-4[_ngcontent-%COMP%]{bottom:20%;right:20%;animation-delay:.9s}.particle-5[_ngcontent-%COMP%]{top:50%;left:10%;animation-delay:1.2s}.particle-6[_ngcontent-%COMP%]{top:50%;right:10%;animation-delay:1.5s}.loading-text[_ngcontent-%COMP%]{position:absolute;bottom:30%;left:50%;transform:translate(-50%);font-size:16px;color:#03abff;animation:_ngcontent-%COMP%_textPulse 2s ease-in-out infinite;margin-top:20px}@keyframes _ngcontent-%COMP%_logoFloat{0%,to{transform:translate(-50%,-50%) translateY(0)}50%{transform:translate(-50%,-50%) translateY(-10px)}}@keyframes _ngcontent-%COMP%_logoGlow{0%{opacity:.3}to{opacity:.6}}@keyframes _ngcontent-%COMP%_rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_particleFloat{0%,to{opacity:0;transform:translateY(0) scale(.5)}50%{opacity:1;transform:translateY(-20px) scale(1)}}@keyframes _ngcontent-%COMP%_textPulse{0%,to{opacity:.6}50%{opacity:1}}.spinner-overlay[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;width:100%;position:fixed;top:0;left:0;background:#33383f66;z-index:9999}']})};var W=["*"],Q=(e,t)=>[e,t],B=class e{buttonText="default text";size="md";color="primary";buttonType="button";static \u0275fac=function(n){return new(n||e)};static \u0275cmp=m({type:e,selectors:[["app-button"]],inputs:{buttonText:"buttonText",size:"size",color:"color",buttonType:"buttonType"},standalone:!1,ngContentSelectors:W,decls:3,vars:6,consts:[[1,"rounded-2",3,"ngClass"]],template:function(n,r){n&1&&(v(),p(0,"button",0),w(1),b(2),i()),n&2&&(f("ngClass",I(3,Q,r.size,r.color)),P("type",r.buttonType),d(2),T(" ",r.buttonText,`
`))},dependencies:[E],styles:['[_ngcontent-%COMP%]:root{--color-bg: #ffffff;--color-text: #364050;--color-primary: #2f80ed;--color-button-bg: #2f80ed;--color-button-text: #ffffff}.dark[_ngcontent-%COMP%]{--color-bg: #121212;--color-text: #ffffff;--color-primary: #2f80ed;--color-button-bg: #ffffff;--color-button-text: #2f80ed}.button[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:9999px;font-weight:600;font-size:1rem;cursor:pointer;transition:all .3s ease;display:inline-flex;align-items:center;justify-content:center;text-align:center}.button--primary[_ngcontent-%COMP%]{background:linear-gradient(90deg,#3056d3,#13c1dd);color:#fff}.button--primary[_ngcontent-%COMP%]:hover{opacity:.85;transform:translateY(-2px);box-shadow:0 4px 15px #0000001a}.button--outline[_ngcontent-%COMP%]{background:transparent;color:var(--color-text);border:2px solid var(--color-text)}.button--outline[_ngcontent-%COMP%]:hover{background:var(--color-text);color:var(--color-bg)}.button--ghost[_ngcontent-%COMP%]{background:transparent;color:var(--color-text);padding:.5rem 1rem}.button--ghost[_ngcontent-%COMP%]:hover{text-decoration:underline}.button--sm[_ngcontent-%COMP%]{padding:.5rem 1.25rem;font-size:.875rem}.button--lg[_ngcontent-%COMP%]{padding:1rem 2rem;font-size:1.125rem}body[_ngcontent-%COMP%]{background-color:#f4f4f4!important;height:100vh;font-family:Inter,sans-serif;font-weight:400;font-style:normal;overflow-x:hidden;margin:0;scroll-behavior:smooth}[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#888;border-radius:10px;border:2px solid transparent;background-clip:content-box}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#555}app-root[_ngcontent-%COMP%]{height:100%;display:block}@media (max-width: 720px){.paddingx-md-0[_ngcontent-%COMP%]{padding-left:0!important;padding-right:0!important}}.checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:20px;height:20px;border-radius:2px;cursor:pointer!important}*[_ngcontent-%COMP%]{box-sizing:border-box}strong[_ngcontent-%COMP%]{font-family:Kanit,sans-serif;font-weight:700;font-style:normal}app-dynamic-tooltip[_ngcontent-%COMP%]   .tooltip-card[_ngcontent-%COMP%]{background:#2d2d2d!important;color:#fff!important;padding:10px 14px!important;border-radius:8px!important;box-shadow:0 4px 14px #0003!important;font-size:13px!important;font-family:Inter,sans-serif!important;position:relative!important;max-width:240px!important}app-dynamic-tooltip[_ngcontent-%COMP%]   .tooltip-card[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-8px;left:30px;width:0;height:0;border-left:8px solid transparent;border-right:8px solid transparent;border-top:8px solid #2d2d2d}app-dynamic-tooltip[_ngcontent-%COMP%]   .tooltip-header[_ngcontent-%COMP%]{font-size:13px;color:#e0e0e0;margin-bottom:6px}app-dynamic-tooltip[_ngcontent-%COMP%]   .tooltip-value[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#fff}span.active[_ngcontent-%COMP%], .active[_ngcontent-%COMP%]{color:#2a85ff!important}.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:40px;height:20px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:0;background-color:#888;transition:.4s;border-radius:20px}.slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:16px;width:16px;left:2px;bottom:2px;background-color:#fff;box-shadow:0 0 15px #0006;transition:.4s;border-radius:50%}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#4caf50}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(20px)}.pages[_ngcontent-%COMP%]{margin-top:35px;display:flex;align-items:center;justify-content:space-between}.pages[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{padding:5px 10px;border:2px solid #e9e9e9;display:flex;align-items:center;justify-content:center;border-radius:5px}.pages[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700}.pages[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]{padding:5px 10px;display:flex;align-items:center;gap:10px}.pages[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .nav-pages[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]{display:flex;gap:13px}.pages[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .nav-pages[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;text-decoration:none;padding:5px 10px;font-weight:700;color:#6f767e}.pages[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .nav-pages[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{color:#000;border:2px solid #ccc;border-radius:5px;background-color:#f4f4f4}.pages[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%], .pages[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{padding:10px 15px}.pages[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .pages[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:24px}#toast-container[_ngcontent-%COMP%]{position:fixed;top:1rem;right:1rem;z-index:9999;display:flex;flex-direction:column;gap:.5rem;pointer-events:none}.custom-toast[_ngcontent-%COMP%]{background-color:#fff!important;border:none!important;border-left:4px solid!important;border-radius:8px!important;box-shadow:0 4px 12px #00000026!important;padding:.75rem 1rem!important;min-width:320px!important;max-width:400px!important;overflow:hidden!important;pointer-events:auto;position:relative!important;transform:translate(100%);opacity:0;transition:all .4s cubic-bezier(.25,.8,.25,1)}.custom-toast.show[_ngcontent-%COMP%]{transform:translate(0);opacity:1}.custom-toast.hide[_ngcontent-%COMP%]{transform:translate(100%);opacity:0;transition:all .3s cubic-bezier(.55,.06,.68,.19)}.custom-toast.show[_ngcontent-%COMP%]:hover{box-shadow:0 6px 16px #0003!important;transform:translate(0) translateY(-2px)}.custom-toast.border-success[_ngcontent-%COMP%]{border-left-color:#28a745!important}.custom-toast.border-success[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:4px;height:100%;background-color:#28a745;z-index:1}.custom-toast.border-danger[_ngcontent-%COMP%]{border-left-color:#dc3545!important}.custom-toast.border-danger[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:4px;height:100%;background-color:#dc3545;z-index:1}.custom-toast.border-warning[_ngcontent-%COMP%]{border-left-color:#ffc107!important}.custom-toast.border-warning[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:4px;height:100%;background-color:#ffc107;z-index:1}.custom-toast.border-primary[_ngcontent-%COMP%]{border-left-color:#0d6efd!important}.custom-toast.border-primary[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:4px;height:100%;background-color:#0d6efd;z-index:1}.custom-toast[_ngcontent-%COMP%]   .toast-body[_ngcontent-%COMP%]{padding:0!important;position:relative;z-index:2}.toast-icon[_ngcontent-%COMP%]{font-size:1.3rem;line-height:1;margin-top:.2rem;flex-shrink:0}.custom-toast[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{font-size:.8rem;padding:.25rem;margin:0;opacity:.6;transition:opacity .2s ease}.custom-toast[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{opacity:1}.custom-toast[_ngcontent-%COMP%]:hover{box-shadow:0 6px 16px #0003!important;transform:translateY(-1px)}.toast-progress[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;height:3px;background-color:#0000001a;width:100%;overflow:hidden}.toast-progress[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:0;height:100%;background-color:currentColor;width:100%;transform:translate(-100%);animation:_ngcontent-%COMP%_toast-progress 3s linear forwards}@keyframes _ngcontent-%COMP%_toast-progress{0%{transform:translate(-100%)}to{transform:translate(0)}}button[_ngcontent-%COMP%]{padding:.5rem 1rem;font-weight:500;border:none;border-radius:6px;cursor:pointer!important;transition:all .2s;transform:scale(1);display:flex!important;justify-content:center;gap:10px;align-items:center}button.sm[_ngcontent-%COMP%]{font-size:.75rem;padding:.25rem .75rem}button.md[_ngcontent-%COMP%]{font-size:.9375rem;padding:.5rem 1rem}button.lg[_ngcontent-%COMP%]{font-size:2.9375rem;padding:.75rem 1.5rem}button.primary[_ngcontent-%COMP%]{background:#2a85ff;color:#fff}button.secondary[_ngcontent-%COMP%]{background:#fff;color:#000;border:1px solid rgba(17,19,21,.5019607843)}button.danger[_ngcontent-%COMP%]{background:red;color:#fff}button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);font-weight:500;transition:.2s all}']})};export{U as a,R as b,N as c,Y as d,B as e};
