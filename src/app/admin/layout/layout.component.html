<div class="layout-wrapper" [class.sidebar-collapsed]="isSidebarCollapsed">
  <!-- Sidebar -->
  <app-sidebar
    [isSidebarCollapsed]="isSidebarCollapsed"
    (sidebarCollapse)="isSidebarCollapsed = $event"
  ></app-sidebar>

  <!-- Main Content -->
  <div class="main-content">
    <!-- Navbar -->
    <div class="navbar-sticky" #navbar>
      <app-navbar></app-navbar>
    </div>

    <!-- Main -->
    <main>
      <!-- Offline UI -->
      <ng-container *ngIf="offlineService.isOffline(); else onlineContent">
        <div class="offline-wrapper text-center">
          <video
            class="offline-video"
            autoplay
            muted
            playsinline
            (ended)="videoEnded = true"
          >
            <source src="assets/videos/going-offline.mp4" type="video/mp4" />
            Your browser does not support the video tag.
          </video>

          <div *ngIf="videoEnded" class="mt-4">
            <h2 class="text-danger">You're Offline</h2>
            <p class="text-muted">Please check your internet connection.</p>
          </div>
        </div>
      </ng-container>

      <!-- Online UI -->
      <ng-template #onlineContent>
        <section [@routeAnimations]="prepareRoute(routerOutlet)">
          <router-outlet #routerOutlet="outlet"></router-outlet>
        </section>
      </ng-template>
    </main>
  </div>
</div>
